<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${action == 'edit'} ? 'Редактировать альбом' : 'Добавить альбом'">Форма альбома</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <header>
        <h1 th:text="${action == 'edit'} ? 'Редактировать альбом' : 'Добавить новый альбом'">Форма альбома</h1>
        <p class="subtitle">Заполните информацию об альбоме</p>
    </header>

    <div class="form-container">
        <form th:action="${action == 'edit'} ? @{/albums/update/{id}(id=${album.id})} : @{/albums}"
              th:object="${album}"
              method="post"
              class="album-form">

<!--            название альбома-->
            <div class="form-group">
                <label for="title">Название альбома <span class="required">*</span></label>
                <input type="text"
                       id="title"
                       th:field="*{title}"
                       placeholder="Например: Abbey Road"
                       th:classappend="${#fields.hasErrors('title')} ? 'error' : ''"
                       maxlength="200"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></span>
            </div>

<!--            исполнитель-->
            <div class="form-group">
                <label for="artist">Исполнитель <span class="required">*</span></label>
                <input type="text"
                       id="artist"
                       th:field="*{artist}"
                       placeholder="Например: Taylor Swift"
                       th:classappend="${#fields.hasErrors('artist')} ? 'error' : ''"
                       maxlength="150"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('artist')}" th:errors="*{artist}"></span>
            </div>

<!--            год выпуска-->
            <div class="form-group">
                <label for="releaseYear">Год выпуска <span class="required">*</span></label>
                <input type="number"
                       id="releaseYear"
                       th:field="*{releaseYear}"
                       placeholder="Например: 2020"
                       th:classappend="${#fields.hasErrors('releaseYear')} ? 'error' : ''"
                       min="1900"
                       max="2100"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('releaseYear')}" th:errors="*{releaseYear}"></span>
            </div>

<!--            жанр-->
            <div class="form-group">
                <label for="genre">Жанр <span class="required">*</span></label>
                <input type="text"
                       id="genre"
                       th:field="*{genre}"
                       placeholder="Например: Rock"
                       th:classappend="${#fields.hasErrors('genre')} ? 'error' : ''"
                       maxlength="100"
                       list="genre-list"
                       required>
                <datalist id="genre-list">
                    <option value="Rock">
                    <option value="Pop">
                    <option value="Jazz">
                    <option value="Classical">
                    <option value="Hip-Hop">
                    <option value="Electronic">
                    <option value="Metal">
                    <option value="R&B">
                </datalist>
                <span class="error-message" th:if="${#fields.hasErrors('genre')}" th:errors="*{genre}"></span>
            </div>

<!--            количество треков-->
            <div class="form-group">
                <label for="trackCount">Количество треков</label>
                <input type="number"
                       id="trackCount"
                       th:field="*{trackCount}"
                       placeholder="Например: 17"
                       th:classappend="${#fields.hasErrors('trackCount')} ? 'error' : ''"
                       min="1"
                       max="999">
                <span class="error-message" th:if="${#fields.hasErrors('trackCount')}" th:errors="*{trackCount}"></span>
            </div>

<!--            описание-->
            <div class="form-group">
                <label for="description">Описание</label>
                <textarea id="description"
                          th:field="*{description}"
                          placeholder="Краткое описание альбома"
                          th:classappend="${#fields.hasErrors('description')} ? 'error' : ''"
                          maxlength="500"
                          rows="4"></textarea>
                <span class="error-message" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></span>
                <small class="form-help">Максимум 500 символов</small>
            </div>

<!--            кнопки действий-->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">
                    <span th:text="${action == 'edit'} ? 'Сохранить изменения' : 'Добавить альбом'"></span>
                </button>
                <a th:href="@{/albums}" class="btn btn-secondary btn-large">Отмена</a>
            </div>

            <p class="form-note"><span class="required">*</span> Обязательные поля</p>
        </form>
    </div>
</div>
</body>
</html>

